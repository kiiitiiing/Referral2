@model SupportDashboadViewModel

@{
    ViewData["Title"] = "Support Dashboard";
    var totalDoctor = Model.TotalDoctors;
    var onlineDoctors = Model.OnlineDoctors;
    var referredPatients = Model.ReferredPatients;
    var accepted = Model.Accepted;
    var redirected = Model.Redirected;
    var max = Model.Max * 1.3;
}

<div class="row">
    <!-- ADMIN DASHBOARD -->
    <div class="col-md-9">
        <div class="card card-success card-outline">
            <div class="card-header with-border">
                <h3>Support: Dashboard</h3>
            </div>
            <div class="card-body">
                <div class="row">
                    <!-- TOTAL DOCTORS -->
                    <div class="col-sm-4">
                        <div class="info-box bg-gradient-yellow">
                            <span class="info-box-icon">
                                <i class="fa fa-user-md"></i>
                            </span>
                            <div class="info-box-content">
                                <span class="info-box-text">TOTAL DOCTORS</span>
                                <span class="info-box-number">@totalDoctor</span>
                                <div class="progress">
                                    <div class="progress-bar"></div>
                                </div>
                                <span class="progress-description"></span>
                            </div>
                        </div>
                    </div>
                    <!-- ONLINE DOCTORS -->
                    <div class="col-sm-4">
                        <div class="info-box bg-gradient-cyan">
                            <span class="info-box-icon">
                                <i class="fa fa-users"></i>
                            </span>
                            <div class="info-box-content">
                                <span class="info-box-text">ONLINE DOCTORS</span>
                                <span class="info-box-number">@onlineDoctors</span>
                                <div class="progress">
                                    <div class="progress-bar"></div>
                                </div>
                                <span class="progress-description"></span>
                            </div>
                        </div>
                    </div>
                    <!-- REFERRED PATIENTS -->
                    <div class="col-sm-4">
                        <div class="info-box bg-green">
                            <span class="info-box-icon">
                                <i class="fa fa-file-o"></i>
                            </span>
                            <div class="info-box-content">
                                <span class="info-box-text">Referred Patients</span>
                                <span class="info-box-number">@referredPatients</span>
                                <div class="progress">
                                    <div class="progress-bar"></div>
                                </div>
                                <span class="progress-description"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- LINKS -->
    <div class="col-md-3">
        <partial name="~/Views/Shared/PartialViews/_SupportLinksPartial.cshtml" />
    </div>
    <!-- MONTHLY ACTIVITY -->
    <div class="col-md-9">
        <div class="card">
            <div class="card-header">
                <h3>Monthly Activity</h3>
            </div>
            <div class="card-body">
                <div class="chart">
                    <canvas id="barChart" height="326" width="653" style="width: 523px; height: 261px;"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="~/assets/plugins/chart.js/Chart.js"></script>
<script>
    var areaChartData = {
        labels: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
        datasets: [
            {
                label: 'Accepted',
                backgroundColor: '#26B99A',
                borderColor: 'rgba(60,141,188,0.8)',
                pointRadius: false,
                pointColor: '#3b8bba',
                pointStrokeColor: 'rgba(60,141,188,1)',
                pointHighlightFill: '#fff',
                pointHighlightStroke: 'rgba(60,141,188,1)',
                data: [@accepted[0],@accepted[1],@accepted[2],@accepted[3],@accepted[4],@accepted[5],@accepted[6],@accepted[7],@accepted[8],@accepted[9],@accepted[10],@accepted[11]]
            },
            {
                label: 'Redirected',
                backgroundColor: '#03586A',
                borderColor: 'rgba(210, 214, 222, 1)',
                pointRadius: false,
                pointColor: 'rgba(210, 214, 222, 1)',
                pointStrokeColor: '#c1c7d1',
                pointHighlightFill: '#fff',
                pointHighlightStroke: 'rgba(220,220,220,1)',
                data: [@redirected[0],@redirected[1],@redirected[2],@redirected[3],@redirected[4],@redirected[5],@redirected[6],@redirected[7],@redirected[8],@redirected[9],@redirected[10],@redirected[11]]
            },
        ]
    };
    $('#notificationModal').modal('show');
    var barChartCanvas = $('#barChart').get(0).getContext('2d');
    var barChartData = jQuery.extend(true, {}, areaChartData);
    var temp0 = areaChartData.datasets[0];
    var temp1 = areaChartData.datasets[1];
    barChartData.datasets[0] = temp0;
    barChartData.datasets[1] = temp1;

    var barChartOptions = {
        responsive: true,
        maintainAspectRatio: false,
        datasetFill: false,
        beginAtZero: true,
        scales:
        {
            xAxes:
                [{
                    display: true
                }],
            yAxes:
                [{
                    display: true,
                    ticks:
                    {
                        beginAtZero: true,
                        steps: 10,
                        stepValue: 5,
                        max: @max
                    }
                }],
        },
    };

    var barChart = new Chart(barChartCanvas, {
        type: 'bar',
        data: barChartData,
        options: barChartOptions
    });
</script>
